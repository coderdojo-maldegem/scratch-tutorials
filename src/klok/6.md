# Alarm

Een alarm dat afgaat wanneer we zelf willen?
Natuurlijk heeft onze klok dat nodig!
We kunnen het alarm bouwen als een nieuwe sprite *alarm* met het uiterlijk van een knop.
Eigenlijk zijn het drie uiterlijken:

1. *Zet alarm* om de alarmtijd in te stellen
2. *Alarm gezet* om aan te duiden dat het alarm is ingesteld
3. *ALARM* die getoond wordt als het alarm afgaat en om het alarm uit te schakelen We hebben ook variabelen nodig om een aantal dingen te onthouden.

Maak deze variabelen:

1. *IsAlarmGezet* om te onthouden of het alarm aan staat of niet
2. *uur* om te onthouden op welk uur het alarm moet afgaan
3. *min* om de minuten te onthouden wanneer het alarm moet afgaan

De variabelen *uur* en *min* kan je zichtbaar zetten zodat je kan zien op welke tijd het alarm is ingesteld.
Zet die op *groot uitlezen* zodat het goed duidelijk is.
In de achtergrond kan je er eventueel een kader rond zetten.

Bijvoorbeeld zo :

![Onder de sprite alarm zijn de waarden van de twee variabelen alarm uur en alarm minuten zichtbaar.](../img/klok-6.1.png)


Nu moeten we code gaan schrijven om het alarm in te stellen.
Bij de start van het programma moet het alarm af staan.
In de variabele *IsAlarmGezet* zetten we het getal 1 of 0 om te onthouden of het alarm aan staat of niet.
We gaan de variabelen met het uur en de minuten ook verbergen om extra duidelijk te maken dat het alarm af staat.
Dat kan met deze blokken:

<code class="b">verander uiterlijk naar [Zet alarm v]</code>
<code class="b">wanneer groene vlag wordt aangeklikt</code>
<code class="b">verberg variabele [uur v]</code>
<code class="b">verberg variabele [min v]</code>
<code class="b">maak [IsAlarmGezet v] [0]</code>

Je kan het alarm aan en af zetten door op de sprite *alarm* te klikken.
Als het alarm niet gezet is, dan zetten we het aan en tonen we de tijd.
Om te testen, zetten we de tijd al eens op `10u45`. Als het alarm wel gezet is, dan moet het weer af en verbergen we de tijd.
Deze blokken heb je daarvoor nodig:

<code class="b">wanneer op deze sprite wordt geklikt</code>
<code class="b">als <> dan</code>
<code class="b"><(IsAlarmGezet) = [0]></code>
<code class="b">maak [IsAlarmGezet v] [0]</code>
<code class="b">maak [uur v] [10]</code>
<code class="b">maak [min v] [45]</code>
<code class="b">toon variabele [min v]</code>
<code class="b">verander uiterlijk naar [Zet alarm v]</code>
<code class="b">maak [IsAlarmGezet v] [1]</code>
<code class="b">verberg variabele [min v]</code>
<code class="b">verberg variabele [uur v]</code>
<code class="b">verander uiterlijk naar [Alarm gezet v]</code>
<code class="b">toon variabele [uur v]</code>

Dan hebben we code nodig om een alarm af te spelen.
Dit moet heel de tijd kijken of het alarm gezet is, en ook of het ingesteld uur en minuten gelijk zijn aan de huidige tijd.
Als dat zo is, dan moet een geluid afgespeeld worden totdat het alarm wordt afgezet.
Dat kan allemaal met deze blokken:

<code class="b">herhaal</code>
<code class="b">wacht tot <></code>
<code class="b">herhaal tot <></code>
<code class="b"><> en <></code>
<code class="b"><(IsAlarmGezet) = [1]></code>
<code class="b"><(uur) = (huidige [uur v])</code>
<code class="b">start geluid [cymbal echo v] en wacht</code>
<code class="b">wacht (1) sec.</code>
<code class="b">wanneer groene vlag wordt aangeklikt</code>
<code class="b"><(min) = (huidige [minuut v])></code>
<code class="b">verander uiterlijk naar [ALARM v]</code>
<code class="b"><(IsAlarmGezet) = [0]></code>
<code class="b"><> en <></code>


<p class="testen">
Niet vergeten testen!
</p>

Als je nu de huidige tijd invult voor *uur* en *min*, werkt je alarm dan al?
Als dit lukt dan kunnen we verder naar het laatste deel...

## Oplossing

<details><summary>klik hier</summary>
```scratch
wanneer groene vlag wordt aangeklikt
ga naar x (-190) y (130)
verander uiterlijk naar [Zet alarm v]
verberg variabele [uur v]
verberg variabele [min v]
maak [IsAlarmGezet v] [0]
herhaal
  wacht tot <<(IsAlarmGezet) = (1)> en <<(uur) = (huidige [uur v])> en <(min) = (huidige [minuut v])>>>
  verander uiterlijk naar [ALARM v]
  herhaal tot <(IsAlarmGezet) = (0)>
    start geluid [cymbal echo v] en wacht
    wacht (1) sec.
  einde
einde

wanneer op deze sprite wordt geklikt
als <(IsAlarmGezet) = [0]> dan
  maak [uur v] [10]
  maak [min v] [45]
  verander uiterlijk naar [Alarm gezet v]
  toon variabele [uur v]
  toon variabele [min v]
einde
```
</details>

[← Stap 5](5.html) [Stap 7 →](7.html)
